# æ¦‚è¿°
![](image.png)
# å˜é‡å’Œå¯å˜æ€§
![](image1.png)
```rust
// å¸¸é‡ï¼Œå¯ä»¥å®šä¹‰åœ¨ä»»ä½•ä½ç½®
// å¸¸é‡å’Œä¸å¯å˜å˜é‡ï¼š
//      å¸¸é‡åœ¨ç¼–è¯‘æœŸæ±‚å€¼
//      ä¸å¯å˜å˜é‡åœ¨è¿è¡Œæ—¶æ±‚å€¼
const A_CONST:i32 = 42 + 2 * 2; 
// å‡½æ•°æ˜¯åœ¨è¿è¡Œå®é™…è®¡ç®—
fn get_num() -> i32 {
    420
}
fn main() { 
    let mut x = 5;      
    // printlnæ˜¯å®ï¼Œä½¿ç”¨æ—¶éœ€è¦åŠ ï¼
    println!("x = {}",x);
    // rusté‡Œï¼Œå˜é‡å€¼é»˜è®¤ä¸èƒ½æ›´æ”¹,é™¤éå®šä¹‰æ—¶åŠ ä¸Šmut
    x = 6;
    println!("x = {}",x);

    println!("A_CONST: {}",A_CONST);

    // ä¸èƒ½æŠŠå‡½æ•°è¿”å›å€¼ä½œä¸ºå¸¸é‡å®šä¹‰ -> è¿è¡Œæ—¶å’Œç¼–è¯‘æœŸ...
    // const a = get_num();
    // å¯ä»¥æŠŠå‡½æ•°è¿”å›å€¼ä½œä¸ºä¸å¯å˜é‡å®šä¹‰
    let a = get_num();
    println!("a = {}",a);

    // éšè—ï¼šæ–°å£°æ˜çš„å˜é‡ä¼šæŠŠæ—§å˜é‡ï¼ˆåŒåï¼‰éšè—(ä¸å¯ç”¨)
    let s = 1;
    let s = s + 100;
    let s = s - 99;
    println!("s = {}",s);
}   
```
# åŸºç¡€æ•°æ®ç±»å‹
![](image2.png)
> usizeä¼šæ ¹æ®æ“ä½œç³»ç»Ÿä½æ•°ä¸åŒè€Œè‡ªåŠ¨è®¾å®šä¸ºi32æˆ–i64, ä¸åŒä½æ•°çš„åŒºåˆ«æ˜¯å¯»å€çš„åŒºåˆ«ï¼Œæ‰€ä»¥æ¨èåœ¨è¡¨ç¤ºæ•°ç»„ä¸‹æ ‡æ—¶ï¼Œä½¿ç”¨usize

![](image3.png)

> rustå­—ç¬¦æ˜¯utf-8ç¼–ç 

```rust
fn main() {
    let c = 'z';
    let z = 'Z';
    let qw = 'ğŸ¸';
    println!("c = {},z = {},qw = {}",c,z,qw);
}
```

![](image4.png)
![ray-so-export.png](image5.png)

## ä½œä¸š
![image.png](image6.png)
```rust
// æ•´æ•°æº¢å‡º
fn avg(a:u32,b:u32)->u32{   
     (a&b)+((a^b)>>1)
}
fn main(){
    assert_eq!(avg(4294967295,4294967295),4294967295);
    assert_eq!(avg(0,0),0);
    assert_eq!(avg(10,20),15);
    assert_eq!(avg(4294967295,1),2147483648);
    println!("passed!");
}
```
# æ•´æ•°æº¢å‡º
![image.png](image7.png)
```rust
// æ•´æ•°æº¢å‡º
fn main(){
    let a:u32=4294967295;
    let b:u32=1;
    // ä¸¤ä¸ªå˜é‡éƒ½å·²çŸ¥ï¼Œä¼šåœ¨ç¼–è¯‘æœŸç›´æ¥è®¡ç®—å‡ºæ¥
    let sum=a+b;
    println!("sum={:?}",sum)
}
```
![image.png](image8.png)
```rust
// æ•´æ•°æº¢å‡º
fn main(){
    // unwrap: é‡åˆ°å¼‚å¸¸ç›´æ¥é€€å‡ºç¨‹åº
    // è½¬u32ï¼Œè®©a+bä¸è¦åœ¨ç¼–è¯‘æœŸè®¡ç®—
    let a:u32="4294967295".parse::<u32>().unwrap();
    let b:u32=1;
    let sum=a+b;
    println!("sum={:?}",sum)
}
```
![image.png](image9.png)
## ä½¿ç”¨å†…ç½®å‡½æ•°é˜²æ­¢å´©æºƒ
```rust
// æ•´æ•°æº¢å‡º
fn main(){
    // unwrap: é‡åˆ°å¼‚å¸¸ç›´æ¥é€€å‡ºç¨‹åº
    // è½¬u32ï¼Œè®©a+bä¸è¦åœ¨ç¼–è¯‘æœŸè®¡ç®—
    let a:u32="4294967295".parse::<u32>().unwrap();
    let b:u32=1;
    // let sum=a+b;
    // ä½¿ç”¨è¯¥æ–¹æ³•é˜²æ­¢æº¢å‡º
    // is_overflow ä»£è¡¨æœ‰æ²¡æœ‰æº¢å‡º
    let (sum,is_overflow) = a.overflowing_add(b);
    println!("sum={:?},is_overflow={:?}",sum,is_overflow);
}
```
![image.png](image10.png)
```rust
// æ•´æ•°æº¢å‡º
fn main(){
    // unwrap: é‡åˆ°å¼‚å¸¸ç›´æ¥é€€å‡ºç¨‹åº
    // è½¬u32ï¼Œè®©a+bä¸è¦åœ¨ç¼–è¯‘æœŸè®¡ç®—
    let a:u32="4294967295".parse::<u32>().unwrap();
    let b:u32=2;
    // let sum=a+b;
    // ä½¿ç”¨è¯¥æ–¹æ³•é˜²æ­¢æº¢å‡º
    // is_overflow ä»£è¡¨æœ‰æ²¡æœ‰æº¢å‡º
    // let (sum,is_overflow) = a.overflowing_add(b);
    let (mul,is_overflow) = a.overflowing_mul(b);
    println!("mul={:?},is_overflow={:?}",mul,is_overflow);
}
```
![image.png](image11.png)
# å…ƒç»„
![image.png](image12.png)
```rust
fn main(){
    let a:i32 = 18;
    let b:char = 'A';
    // å…ƒç»„
    let mytuple = (a,b);
    let mytuple:(i32,char) = (a,b); // æ˜¾å¼å£°æ˜ç±»å‹
    println!("{}:{}",mytuple.0,mytuple.1);
    // è§£å°è£…
    let (c,d) = mytuple;
    println!("c={},d={}",c,d);
    // å‡½æ•°è¿”å›å€¼å¯ä»¥ç”¨å…ƒç»„
    let (res,is_overflow)=a.overflowing_add(10);
    println!("{} {}",res,is_overflow);
}
```
# æ•°ç»„
![image.png](image13.png)
```rust
fn main() {
    // let myarr = [1,2,3,4,5];
    let myarr:[u32;5] = [1,2,3,4,5];
    println!("{}",myarr[1]);
    // ç¼–è¯‘æ—¶é”™è¯¯(cargo build),æ•°ç»„è¶Šç•Œ
    // println!("{}",myarr[5]); 
    // å­—ç¬¦ä¸²è½¬æ•°å­—ç„¶åä½¿ç”¨å˜é‡æ¥è¡¨ç¤ºä¸‹æ ‡ï¼Œé€šè¿‡äº†ç¼–è¯‘æ—¶çš„æ£€æŸ¥
    // let index = "5".parse::<usize>().unwrap();
    // println!("myarr[5] = {}",myarr[index]);
    // è¿è¡Œç¼–è¯‘åçš„æ–‡ä»¶ ./target/debug/é¡¹ç›®å 
    // å˜æˆè¿è¡Œæ—¶é”™è¯¯
    // thread 'main' panicked at 'index out of bounds: the len is 5 but the index is 5', src/main.rs:9:30
    // note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
    
    // å®šä¹‰ä¸€ä¸ªæ¯ä¸ªå…ƒç´ éƒ½ç›¸åŒçš„æ•°ç»„
    let mut mybuffer:[u32;32*1024]=[0;32*1024];
    println!("mybuffer[1024]={}",mybuffer[1024]);

    // ä¿®æ”¹æ•°ç»„é‡Œçš„å…ƒç´ (éœ€è¦å®šä¹‰æ—¶åŠ mut)
    mybuffer[1024] = 1;
    println!("mybuffer[1024]={}",mybuffer[1024]);
}
```
# åˆ‡ç‰‡
![image.png](14.png)
```rust
fn main() {
    let mut arr:[i32;5]=[1,2,3,4,5];
    let slice = &arr[0..3]; // .. æ˜¯rangeè¯­æ³•,&æ˜¯å¼•ç”¨ç¬¦å·
    // slice[0] = 1,size = 3
    println!("slice[0] = {},size = {}",slice[0],slice.len());

    let slice2 = &arr[3..5];
    println!("slice2[0] = {},size = {}",slice2[0],slice2.len());

    // å»ºè®®éç©ºåˆ¤æ–­ç”¨is_empty(),è€Œä¸ç®—len()==0
    println!("{}",slice2.is_empty());

    // æ”¹å˜åˆ‡ç‰‡çš„å…ƒç´ çš„å€¼ï¼Œä¼šæ”¹å˜å¼•ç”¨æºå¯¹åº”çš„å€¼
    let mut slice3 = &mut arr[..];
    slice3[0] = 6;
    println!("arr[0]={}",arr[0]);
}
```
# ç»“æ„ä½“
> rustæ˜¯å¤šç¼–ç¨‹èŒƒå¼çš„è¯­è¨€ï¼Œæ”¯æŒé¢å‘å¯¹è±¡ã€é¢å‘è¿‡ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹

![image.png](15.png)
```rust
// å…ƒç»„ç»“æ„
struct Pair(i32,f32);
// æ ‡å‡†çš„cç»“æ„
#[derive(Debug)] // æ´¾ç”Ÿå±æ€§(ç¼–è¯‘æœŸè¯­æ³•) -> ç¼–è¯‘æœŸå†³å®šè¾“å‡ºçš„å†…å®¹
struct Person{
    name: String,
    age: u32,
}
// å•å…ƒç»“æ„(æ— å­—æ®µ) åœ¨æ³›å‹é‡Œæœ‰ç”¨ï¼Œä½†æ˜¯æ€»ä½“ç”¨å¾—å°‘
struct Unit;

fn main() {
    let pair = Pair(10,4.2);
    println!("{} {}",pair.0,pair.1);

    let jack=Person{
        name: String::from("jack"),
        age: 6,
    };
    println!("{:?}",jack);
    // println!("name={} age={}",jack.name,jack.age);

    let unit = Unit;
}
```
# æšä¸¾
![image.png](16.png)
![image.png](17.png)
```rust
enum IpAddr {
    Ipv4(u8,u8,u8,u8),
    Ipv6(u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8,u8),
}
fn main() {
    let localhost: IpAddr = IpAddr::Ipv4(127,0,0,1);
    match localhost{
        // å¦‚æœæ˜¯Ipv4ç±»å‹ï¼Œè§£å°è£…åˆ°a b c d
        IpAddr::Ipv4(a,b,c,d) => {
            println!("{} {} {} {}",a,b,c,d);
        }
        // å¦‚æœä¸æ˜¯IpAddrçš„Ipv4ç±»å‹:
        _ => {}
    }
}
```
